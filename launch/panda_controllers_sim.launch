<?xml version="1.0" ?>
<!-- Launch file per far partire:
	- gazebo e rviz
	- il controllore desiderato: 
		- backstepping_controller
		- computed_torque_controller
		- computed_torque_mod_controller
		- CT_mod_controller_OS
	- la traiettoria su rviz -->
<launch>

	<arg name="package" 			default="panda_controllers" />
	<arg name="arm_id" 				default="panda" doc="Name of the panda robot to spawn" />
	
	<!-- flag -->
	<arg name="use_gripper" 		default="false" />
	<arg name="rviz" 				default="false" />
	<!-- <arg name="clik"            	default="false" /> -->
	<arg name="rosbag_BS"			value="false" />
	<arg name="rosbag_CT"			value="false" />
    
	<!-- set controller -->
	<arg name="controller_name" 	default="CT_mod_controller_OS" /> <!-- backstepping_controller, computed_torque_controller, computed_torque_mod_controller -->
	
	<!-- to load yaml -->
	<rosparam command="load" 	file="$(find panda_controllers)/config/panda_controllers_default.yaml" /> <!-- File che carica valori di costanti quali valori di k e dt -->
	<group ns="$(arg controller_name)">
		<rosparam command="load" 	file="$(find panda_controllers)/config/inertial/inertial_DH_REG.yaml" /> <!--File che carica parametri dinamici per regressore stimati, ricavati attraverso dati URDF del franka con convernzione D-H -->
	</group>

	<!-- to load gazebo (and rviz) -->
	<include file="$(find panda_controllers)/launch/gazebo/panda.launch">
		<arg name="rviz_config" value="$(find panda_controllers)/launch/rviz/franka_marker.rviz" />
		<arg name="rviz" 		value="$(arg rviz)" />
		<arg name="use_gripper" value="$(arg use_gripper)" />
		<arg name="controller" 	value="$(arg controller_name)" />
	</include>
	
	<!-- to draw trajectory on rviz -->
	<include file="$(find panda_controllers)/launch/rviz/panda_trajectory_rviz.launch" if="$(arg rviz)" >
		<arg name="controller_name" value="$(arg controller_name)" />
	</include>
	
	<!-- to start rosbag -->
	<!-- <include file="$(find panda_controllers)/launch/rosbag_BS.launch" if="$(arg rosbag_BS)" >
		<arg name="controller_name" value="$(arg controller_name)" />
		<arg name="clik"            value="$(arg clik)" />
	</include> -->
	
</launch>